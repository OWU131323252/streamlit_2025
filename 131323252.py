import streamlit as st
import random
import matplotlib.pyplot as plt


traits = {
    "Charm": [
        "ç‹ã®å‰ã§ã‚‚å ‚ã€…ã¨è©±ã›ã‚‹æ°—ãŒã™ã‚‹",
        "äººå‰ã§æ­Œã£ãŸã‚Šæ¼”ã˜ã‚‹ã®ãŒå¥½ãã ",
        "åˆå¯¾é¢ã§ã‚‚ã™ãã«ä»²è‰¯ããªã‚Œã‚‹",
        "è‡ªåˆ†ã®è©±ã§å‘¨å›²ã‚’æ¥½ã—ã¾ã›ãŸã„ã¨æ€ã†",
        "è‡ªç„¶ã¨äººã®æ³¨ç›®ã‚’é›†ã‚ã‚‹",
        "é­…åŠ›ã‚’è¤’ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„",
        "äººã‚’èª¬å¾—ã™ã‚‹ã®ãŒå¾—æ„ã ",
        "æ³¨ç›®ã®ä¸­å¿ƒã«ãªã‚‹ã®ãŒå¥½ãã "
    ],
    "Wisdom": [
        "æ›–æ˜§ãªç›´æ„ŸãŒå½“ãŸã‚‹ã“ã¨ãŒå¤šã„",
        "ç‘æƒ³ã‚„æ€ç´¢ã®æ™‚é–“ãŒå¿…è¦ã ã¨æ„Ÿã˜ã‚‹",
        "éå»ã®å‡ºæ¥äº‹ã‚’æ·±ãåˆ†æã™ã‚‹ç™–ãŒã‚ã‚‹",
        "äººã®å˜˜ã‚„æœ¬éŸ³ã‚’æ•æ„Ÿã«å¯ŸçŸ¥ã§ãã‚‹",
        "è¤‡é›‘ãªå•é¡Œã‚’è§£ãã®ãŒå¥½ãã ",
        "æ–°ã—ã„çŸ¥è­˜ã‚’å¸¸ã«æ±‚ã‚ã¦ã„ã‚‹",
        "æ±ºæ–­ã¯æ…é‡ã«è¡Œã†æ–¹ã ",
        "ä»–äººãŒè¦‹è½ã¨ã™ç´°ã‹ã„ã“ã¨ã«æ°—ä»˜ã"
    ],
    "Creativity": [
        "ç©ºã«æµ®ã‹ã¶é›²ã‚’çœºã‚ã¦ã„ã‚‹ã¨ç‰©èªãŒæµ®ã‹ã¶",
        "èŠ¸è¡“ä½œå“ã‚„éŸ³æ¥½ã«å¼·ãæ„Ÿå‹•ã™ã‚‹",
        "ç©ºæƒ³ã«ãµã‘ã‚‹æ™‚é–“ãŒä¸€ç•ªå¥½ãã ",
        "æ—¥å¸¸ã®ä¸­ã§æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã©ã‚“ã©ã‚“æ¹§ã",
        "ç‹¬å‰µçš„ãªã‚‚ã®ã‚’ä½œã‚ŠãŸã„ã¨æ€ã†",
        "ç‰©äº‹ã‚’é•ã£ãŸè¦–ç‚¹ã‹ã‚‰è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹",
        "å•é¡Œã®è§£æ±ºç­–ã‚’è€ƒãˆã‚‹ã®ãŒå¥½ãã ",
        "æƒ³åƒåŠ›ãŒè±Šã‹ã§æ´»ç™ºã "
    ],
    "Courage": [
        "æ€–ãã¦ã‚‚ã‚„ã‚‹ã—ã‹ãªã„ã¨æ€ã†",
        "ãƒªã‚¹ã‚¯ã‚’ã¨ã£ã¦ã§ã‚‚æŒ‘æˆ¦ã—ãŸã„",
        "è‡ªåˆ†ãŒå…ˆé ­ã«ç«‹ã¤ã“ã¨ãŒå¤šã„",
        "é€†å¢ƒã«ç‡ƒãˆã‚‹ã‚¿ã‚¤ãƒ—ã ",
        "ç°¡å˜ã«è«¦ã‚ãªã„",
        "æŒ‘æˆ¦ã‚’æ¥½ã—ã‚€",
        "ä¿¡å¿µã‚’è²«ã",
        "ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã®ä¸­ã§ã‚‚æ±ºæ–­ã§ãã‚‹"
    ],
    "Loyalty": [
        "ä»²é–“ã‚’æ±ºã—ã¦è¦‹æ¨ã¦ãªã„è‡ªä¿¡ãŒã‚ã‚‹",
        "èª°ã‹ã®ãŸã‚ã«å°½ãã™ã®ãŒå¥½ãã ",
        "ä¿¡é ¼ã•ã‚Œã‚‹ã¨å…¨åŠ›ã§å¿œãˆãŸããªã‚‹",
        "ä»²é–“ã‚’å®ˆã‚‹ãŸã‚ãªã‚‰è‡ªåˆ†ã‚’çŠ ç‰²ã«ã§ãã‚‹",
        "é•·ãç¶šãé–¢ä¿‚ã‚’å¤§åˆ‡ã«ã™ã‚‹",
        "ç´„æŸã¯å¿…ãšå®ˆã‚‹",
        "å›°é›£ãªæ™‚ã§ã‚‚é ¼ã‚Šã«ãªã‚‹",
        "è¦‹è¿”ã‚Šã‚’æ±‚ã‚ãšåŠ©ã‘ã‚‹ã“ã¨ãŒå¤šã„"
    ],
    "Justice": [
        "é–“é•ã„ã‚’è¦‹ã¦è¦‹ã¬ãµã‚Šã¯ã§ããªã„",
        "ãƒ«ãƒ¼ãƒ«ã¯å®ˆã‚‹ã¹ãã ã¨æ€ã†",
        "æ­£ã—ã„ã¨æ€ã†ã“ã¨ã«ã¯å¾“ã†",
        "äººã‚’å…¬å¹³ã«è©•ä¾¡ã—ã‚ˆã†ã¨ã™ã‚‹",
        "ä¸æ­£ã«ç«‹ã¡å‘ã‹ã†å‹‡æ°—ãŒã‚ã‚‹",
        "å¹³ç­‰ã‚’å¼·ãä¿¡ã˜ã¦ã„ã‚‹",
        "çŠ¶æ³ã‚’æ…é‡ã«åˆ¤æ–­ã™ã‚‹",
        "å¼±ã„è€…ã‚’å®ˆã‚‹ã“ã¨ã‚’é‡è¦–ã™ã‚‹"
    ],
    "Independence": [
        "ä¸€äººã§ã®å†’é™ºãŒå‘ã„ã¦ã„ã‚‹ã¨æ€ã†",
        "å‘¨å›²ã«åˆã‚ã›ã™ãã‚‹ã¨ç–²ã‚Œã‚‹",
        "å˜ç‹¬è¡Œå‹•ã®æ–¹ãŒè½ã¡ç€ã",
        "äººã«é ¼ã‚‹ã‚ˆã‚Šè‡ªåˆ†ã§è§£æ±ºã—ãŸã„",
        "è‡ªåˆ†ã®åˆ¤æ–­ã‚’ä¿¡ã˜ã¦ã„ã‚‹",
        "è‡ªç”±ã«å‹•ãã®ãŒå¥½ãã ",
        "ä»–äººã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã•ã‚ŒãŸããªã„",
        "è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã‚‹"
    ],
    "Compassion": [
        "æ¶™ã‚’æµã™äººã‚’è¦‹ã¦æ”¾ã£ã¦ãŠã‘ãªã„",
        "å›°ã£ã¦ã„ã‚‹äººã‚’è¦‹ã‚‹ã¨å£°ã‚’ã‹ã‘ãŸããªã‚‹",
        "å‹•ç‰©ã‚„å­ã©ã‚‚ã«è‡ªç„¶ã¨å„ªã—ãã—ã¦ã—ã¾ã†",
        "ä»–äººã®ç—›ã¿ã«å¼·ãå…±æ„Ÿã—ã¦ã—ã¾ã†",
        "è¦‹è¿”ã‚Šã‚’æ±‚ã‚ãšåŠ©ã‘ã‚‹ã“ã¨ãŒå¤šã„",
        "ä»–äººã®æ°—æŒã¡ã‚’ç†è§£ã—ã‚ˆã†ã¨åŠªåŠ›ã™ã‚‹",
        "å‘¨å›²ã®äººã®å¹¸ã›ã‚’æ°—ã«ã‹ã‘ã¦ã„ã‚‹",
        "ã‚ˆãäººã‚’æ…°ã‚ã‚‹ã“ã¨ãŒã‚ã‚‹"
    ]
}



trait_to_status = {
    "Charm": "Luck",
    "Wisdom": "Magic",
    "Creativity": "Magic",
    "Courage": "HP",
    "Loyalty": "Defense",
    "Justice": "Defense",
    "Independence": "Speed",
    "Compassion": "Luck"
}

atk_traits = ["Courage", "Creativity", "Independence"]

character_classes = [
    {
        "name": "é‹å‘½ã®æ—…äºº ğŸŒŒ",
        "description": (
            "ã‚ãªãŸã¯é‹å‘½ã®æ—…äººã€‚ç›´æ„Ÿã¨å¶ç„¶ã®ä¸­ã§ç”Ÿãã€ä¸–ç•Œã«å°ã‹ã‚Œã—è‡ªç”±ãªé­‚ã§ã™ã€‚å¸¸è­˜ã«ç¸›ã‚‰ã‚Œãšã€ç‹¬è‡ªã®è¦–ç‚¹ã§ç‰©äº‹ã‚’æ‰ãˆã€"
            "ã©ã‚“ãªçŠ¶æ³ã§ã‚‚è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’å´©ã•ãšã«æ­©ã‚€åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚æ™‚ã«å‘¨å›²ãŒç†è§£ã§ããªã„ã‚ˆã†ãªã²ã‚‰ã‚ãã‚„ç›´æ„Ÿã«å¾“ã„ã€"
            "äºˆæ¸¬ä¸èƒ½ãªå±•é–‹ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚ã‚ãªãŸã®äººç”Ÿã¯ã¾ã‚‹ã§æ˜Ÿã€…ãŒç¹”ã‚Šãªã™éŠ€æ²³ã®æ—…ã®ã‚ˆã†ã«å¤šå½©ã§ã€"
            "å¶ç„¶ã®å‡ºä¼šã„ã‚’é‹å‘½ã«å¤‰ãˆã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚è‡ªç”±ã‚’æ„›ã—ã€æŸç¸›ã‚’å«Œã„ã€è‡ªåˆ†ã ã‘ã®é“ã‚’åˆ‡ã‚Šé–‹ãå§¿ã¯ã€å¤šãã®äººã«åˆºæ¿€ã‚’ä¸ãˆã€"
            "æ–°ãŸãªå¯èƒ½æ€§ã‚’æ‹“ãç¯ç«ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚å›°é›£ã«é­é‡ã—ã¦ã‚‚ã€æ˜Ÿç©ºã‚’è¦‹ä¸Šã’ã‚Œã°å¸Œæœ›ãŒæ¹§ãã€è‡ªä¿¡ã¨å‹‡æ°—ã‚’å–ã‚Šæˆ»ã›ã¾ã™ã€‚"
            "ã‚ãªãŸã®ç”Ÿãæ§˜ã¯ã€ã¾ã•ã«ä¸–ç•Œã®ã©ã“ã«ã‚‚ãªã„å”¯ä¸€ç„¡äºŒã®å†’é™ºè­šãªã®ã§ã™ã€‚"
        ),
        "conditions": lambda s: s.get("Luck", 0) >= 30 and s.get("Speed", 0) >= 30
    },
    {
        "name": "å¤ä»£ã®é­”å°å£« ğŸ§™â€â™‚ï¸",
        "description": (
            "ã‚ãªãŸã¯å¤ä»£ã®é­”å°å£«ã®ã‚ˆã†ã«ã€çŸ¥æµã¨å‰µé€ ã®æ·±æ·µã‚’è¦—ãè¾¼ã¿ã€ãã®ç¥ç§˜ã‚’æ“ã‚‹å­˜åœ¨ã§ã™ã€‚é•·ã„å¹´æœˆã‚’ã‹ã‘ã¦ç£¨ãä¸Šã’ãŸæ´å¯ŸåŠ›ã¯ã€"
            "æ™‚ã«äººã®æƒ³åƒã‚’è¶…ãˆãŸçœŸå®Ÿã‚’è¦‹é€šã™åŠ›ã¨ãªã‚Šã€ã‚ãªãŸã®å‘¨å›²ã«å®‰ã‚‰ãã¨æ–°ãŸãªçŸ¥è­˜ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚çŸ¥çš„å¥½å¥‡å¿ƒãŒæ—ºç››ã§ã€"
            "æœªçŸ¥ã®ä¸–ç•Œã¸ã®æ¢æ±‚å¿ƒã‚’æ­¢ã‚ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å›°é›£ã«ã¶ã¤ã‹ã£ã¦ã‚‚å†·é™ã«åˆ†æã—ã€è§£æ±ºã®ç³¸å£ã‚’æ¢ã—å‡ºã™ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€"
            "äººã€…ã‹ã‚‰é ¼ã‚Šã«ã•ã‚Œã‚‹å­˜åœ¨ã§ã™ã€‚ã‚ãªãŸã®æ€è€ƒã®æ·±ã•ã¯ã€å‘¨å›²ã®æ ã‚’è¶…ãˆãŸå‰µé€ æ€§ã‚’å¼•ãå‡ºã—ã€æœªæ¥ã‚’åˆ‡ã‚Šæ‹“ãé­”åŠ›ã¸ã¨æ˜‡è¯ã—ã¾ã™ã€‚"
            "ã©ã‚“ãªéšœå®³ã‚‚çŸ¥æµã®åŠ›ã§ä¹—ã‚Šè¶Šãˆã€æ™‚ä»£ã‚’è¶…ãˆã¦ä¼èª¬ã¨ã—ã¦èªã‚Šç¶™ãŒã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚"
        ),
        "conditions": lambda s: s.get("Magic", 0) >= 10 and s.get("Defense", 0) < 10
    },
    {
        "name": "ç¥æ®¿ã®å®ˆè­·é¨å£« ğŸ›¡",
        "description": (
            "ã‚ãªãŸã¯ç¥æ®¿ã®å®ˆè­·é¨å£«ã€‚å¿ ç¾©ã¨è²¬ä»»æ„Ÿã‚’èƒ¸ã«åˆ»ã¿ã€ã©ã‚“ãªå›°é›£ã«ã‚‚ç«‹ã¡å‘ã‹ã†æºã‚‹ããªã„å¼·ã•ã‚’æŒã£ã¦ã„ã¾ã™ã€‚"
            "ä»²é–“ã‚„ä¿¡å¿µã‚’å®ˆã‚‹ãŸã‚ãªã‚‰ã€å·±ã®èº«ã‚’çŠ ç‰²ã«ã™ã‚‹ã“ã¨ã‚‚å­ã‚ãªã„è¦šæ‚Ÿã‚’æŒã¤ã‚ãªãŸã¯ã€ã¾ã•ã«ä¿¡é ¼ã¨å°Šæ•¬ã®è±¡å¾´ã§ã™ã€‚"
            "ãã®å§¿ã¯äººã€…ã«å®‰å¿ƒæ„Ÿã¨å‹‡æ°—ã‚’ä¸ãˆã€ã‚ãªãŸã®å‘¨å›²ã«ã¯è‡ªç„¶ã¨äººãŒé›†ã¾ã‚Šã¾ã™ã€‚å …ç‰¢ãªé˜²å¾¡åŠ›ã¨ä½“åŠ›ã¯ã¾ã•ã«é‰„å£ã®è¦å¡ã€‚"
            "ã—ã‹ã—ã€ãŸã ã®åŠ›å¼·ã•ã ã‘ã§ãªãã€å†…ã«ç§˜ã‚ãŸå„ªã—ã•ã‚„æ…ˆæ„›ã‚‚å…¼ã­å‚™ãˆã¦ã„ã‚‹ãŸã‚ã€å¤šãã®è€…ãŒã‚ãªãŸã‚’æ…•ã„ã¾ã™ã€‚"
            "å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹ãŸã³ã«ã‚ãªãŸã®åå£°ã¯é«˜ã¾ã‚Šã€ä¼èª¬ã®å®ˆè­·é¨å£«ã¨ã—ã¦æ°¸é ã«èªã‚Šç¶™ãŒã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚"
        ),
        "conditions": lambda s: s.get("HP", 0) >= 15 and s.get("Defense", 0) >= 10
    },
    {
        "name": "é¢¨è¿½ã„ã®ç›—è³Š ğŸ—¡",
        "description": (
            "ã‚ãªãŸã¯é¢¨è¿½ã„ã®ç›—è³Šã€‚è‡ªç”±ã¨ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’æ„›ã—ã€ãƒªã‚¹ã‚¯ã‚’æã‚Œãšå¤§èƒ†ã«è¡Œå‹•ã™ã‚‹æŒ‘æˆ¦è€…ã‚¿ã‚¤ãƒ—ã§ã™ã€‚"
            "ç´ æ—©ã•ã¨é‹ã‚’æ­¦å™¨ã«ã€ã©ã‚“ãªå±€é¢ã§ã‚‚æ©Ÿæ•ã«å‹•ãã€äºˆæƒ³å¤–ã®å¥‡è¥²ã‚„è„±å‡ºã‚’æˆåŠŸã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚"
            "æ±ºæ–­åŠ›ã¨ç›´æ„ŸåŠ›ã«å„ªã‚Œã€è¤‡é›‘ãªçŠ¶æ³ã§ã‚‚ç¬æ™‚ã«æœ€å–„ã®é¸æŠã‚’ä¸‹ã›ã‚‹ãŸã‚ã€ä»²é–“ã‚„æ•µã‹ã‚‰ã‚‚ä¸€ç›®ç½®ã‹ã‚Œã¾ã™ã€‚"
            "ã‚ãªãŸã®ç”Ÿãæ§˜ã¯å¸¸ã«å†’é™ºã¨åˆºæ¿€ã«æº€ã¡ã¦ãŠã‚Šã€æŸç¸›ã‚’å«Œã†è‡ªç”±ãªé­‚ã€‚"
            "ãã®å§¿ã¯ã¾ã‚‹ã§é¢¨ã®ã‚ˆã†ã«è»½ã‚„ã‹ã§ã€ã„ã¤ã‚‚æ–°ãŸãªåˆºæ¿€ã‚’æ±‚ã‚ç¶šã‘ã‚‹ã§ã—ã‚‡ã†ã€‚å±é™ºã‚’æã‚Œãªã„ãã®å‹‡æ°—ã¯å¤šãã®ç‰©èªã®ä¸»å½¹ã¨ãªã‚Šã¾ã™ã€‚"
        ),
        "conditions": lambda s: s.get("Speed", 0) >= 15 and s.get("Luck", 0) >= 15
    },
    {
        "name": "æ˜Ÿè© ã¿ã®å è¡“å£« ğŸ”®",
        "description": (
            "ã‚ãªãŸã¯æ˜Ÿè© ã¿ã®å è¡“å£«ã€‚å®‡å®™ã®ç¥ç§˜ã¨æ˜Ÿã®å°ãã‚’æ„Ÿã˜å–ã‚Šã€äººã€…ã®æœªæ¥ã‚’è¦‹é€šã™åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚"
            "æ„Ÿæ€§ã¨å…±æ„ŸåŠ›ã«å„ªã‚Œã€ä»–è€…ã®å¿ƒã®å¥¥åº•ã«è§¦ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€å‘¨å›²ã‹ã‚‰ã¯å¤©æ€§ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã¨ã—ã¦ä¿¡é ¼ã•ã‚Œã¦ã„ã¾ã™ã€‚"
            "ã‚ãªãŸã®åŠ©è¨€ã¯å˜ãªã‚‹äºˆè¨€ã§ã¯ãªãã€çš„ç¢ºãªæ´å¯Ÿã¨æ·±ã„ç†è§£ã«åŸºã¥ã„ã¦ãŠã‚Šã€å¤šãã®äººã®é“æ¨™ã¨ãªã‚Šã¾ã™ã€‚"
            "é‹ã¨ç›´æ„Ÿã«å°ã‹ã‚ŒãŸã‚ãªãŸã®äººç”Ÿã¯ã€ä¸æ€è­°ãªå¶ç„¶ã‚„å¥‡è·¡ã«å½©ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
            "æ™‚ã«ã¯è‡ªã‚‰ã®å†…ãªã‚‹å£°ã«è€³ã‚’å‚¾ã‘ã‚‹ã“ã¨ãŒã€æœªæ¥ã‚’åˆ‡ã‚Šé–‹ãéµã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ãã®ç¥ç§˜çš„ãªå­˜åœ¨æ„Ÿã¯ã€å‘¨å›²ã®äººã€…ã«å®‰å¿ƒæ„Ÿã¨å¸Œæœ›ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚"
        ),
        "conditions": lambda s: s.get("Luck", 0) >= 40
    },
    {
        "name": "è–å…‰ã®ç™’ã—æ‰‹ âœ¨",
        "description": (
            "ã‚ãªãŸã¯è–å…‰ã®ç™’ã—æ‰‹ã€‚äººã€…ã‚’ç™’ã‚„ã™ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã€å„ªã—ã•ã¨çŸ¥æ€§ã‚’å…¼ã­å‚™ãˆãŸåŒ…å®¹åŠ›ã®ã‚ã‚‹å­˜åœ¨ã§ã™ã€‚"
            "ãã®å­˜åœ¨è‡ªä½“ãŒå‘¨å›²ã®å¿ƒã‚’æ¸©ã‹ãåŒ…ã¿è¾¼ã¿ã€ã©ã‚“ãªæ™‚ã‚‚æ”¯ãˆã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚"
            "é­”åŠ›ã¨é‹ã«æµã¾ã‚ŒãŸã‚ãªãŸã¯ã€å‚·ã¤ã„ãŸè€…ã‚’ç™’ã™åŠ›ã ã‘ã§ãªãã€ç²¾ç¥çš„ãªå¼·ã•ã‚‚æŒã¡åˆã‚ã›ã¦ã„ã¾ã™ã€‚"
            "å¤šãã®äººã€…ã‹ã‚‰é ¼ã‚Šã«ã•ã‚Œã€ã‚ãªãŸã®ç™’ã—ã®æ‰‹ã¯å¹¾å¤šã®å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹å¸Œæœ›ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚"
            "å›°é›£ã«ç›´é¢ã—ãŸã¨ãã‚‚ã€ãã®æ¸©ã‹ãªå…‰ãŒå¿ƒã®é—‡ã‚’æ‰•ã†ã®ã§ã™ã€‚"
            "ã‚ãªãŸã®å­˜åœ¨ã¯ã€ã¾ã•ã«è–ãªã‚‹å…‰ã®ã‚ˆã†ã«å¤šãã®äººã®äººç”Ÿã«å…‰ã‚’ç¯ã—ç¶šã‘ã‚‹ã§ã—ã‚‡ã†ã€‚"
        ),
        "conditions": lambda s: s.get("Luck", 0) >= 5 and s.get("Magic", 0) >= 10
    },
    {
        "name": "é‹¼é‰„ã®æ‹³é—˜å£« ğŸ¥Š",
        "description": (
            "ã‚ãªãŸã¯é‹¼é‰„ã®æ‹³é—˜å£«ã€‚å¼·é­ãªæ„å¿—ã¨åœ§å€’çš„ãªè¡Œå‹•åŠ›ã§å‘¨å›²ã‚’å¼•ã£å¼µã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã§ã™ã€‚"
            "è€ƒãˆã‚‹ã‚ˆã‚Šã‚‚å‹•ãã“ã¨ã‚’å¥½ã¿ã€ç›®ã®å‰ã®èª²é¡Œã«çœŸã£å‘ã‹ã‚‰æŒ‘ã¿ã¾ã™ã€‚"
            "ä½“åŠ›ã«æµã¾ã‚Œã€è‚‰ä½“çš„ãªå¼·ã•ã¯ã¾ã•ã«é‰„ã®å¦‚ã—ã€‚é­”åŠ›ãŒæ§ãˆã‚ãªåˆ†ã€ç´”ç²‹ãªãƒ‘ãƒ¯ãƒ¼ã§æ•µã‚’åœ§å€’ã—ã¾ã™ã€‚"
            "ã‚ãªãŸã®æ‹³ã¯å›°é›£ã‚’ç²‰ç •ã—ã€æŒ‘æˆ¦è€…ãŸã¡ã«å‹‡æ°—ã‚’ä¸ãˆã‚‹è±¡å¾´ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ãã®ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ãªå§¿å‹¢ã¯ã€ä»²é–“ã«ã¨ã£ã¦ã‚‚åˆºæ¿€ã¨ãªã‚Šã€çš†ã‚’é¼“èˆã—ã¾ã™ã€‚"
            "åŠªåŠ›ã¨æ ¹æ€§ã§ç¯‰ãä¸Šã’ãŸé‹¼ã®è‚‰ä½“ã¨ç²¾ç¥ã¯ã€æ•°å¤šã®æˆ¦ã„ã§è¼ãã‚’æ”¾ã¤ã§ã—ã‚‡ã†ã€‚"
        ),
        "conditions": lambda s: s.get("HP", 0) >= 10 and s.get("Magic", 0) <= 5
    },
    {
        "name": "å½±ã®è«œå ±å“¡ ğŸ•µï¸â€â™‚ï¸",
        "description": (
            "ã‚ãªãŸã¯å½±ã®è«œå ±å“¡ã€‚æ²ˆé»™ã®ä¸­ã«çŸ¥æµã‚’å®¿ã—ã€å†·é™ã‹ã¤è¨ˆç”»çš„ã«ç‰©äº‹ã‚’å‹•ã‹ã™ã‚¯ãƒ¼ãƒ«ãªè¦³å¯Ÿè€…ã§ã™ã€‚"
            "ç´ æ—©ã•ã¨é‹ã«é•·ã‘ã€ã©ã‚“ãªçŠ¶æ³ã§ã‚‚è¿…é€Ÿã«æƒ…å ±ã‚’åé›†ã—ã€æ•µã®ä¸€æ­©å…ˆã‚’èª­ã¿ã¾ã™ã€‚"
            "ã‚ãªãŸã®è¨ˆç”»æ€§ã¨åˆ¤æ–­åŠ›ã¯å¤šãã®ä½œæˆ¦æˆåŠŸã®éµã¨ãªã‚Šã€å‘¨å›²ã‹ã‚‰çµ¶å¤§ãªä¿¡é ¼ã‚’å¾—ã¦ã„ã¾ã™ã€‚"
            "ç§˜å¯†è£ã«è¡Œå‹•ã—ãªãŒã‚‰ã‚‚ã€ãã®å­˜åœ¨æ„Ÿã¯åœ§å€’çš„ã§ã‚ã‚Šã€é—‡ã®ä¸­ã§å…‰ã‚‹é‹­ã„çœ¼å·®ã—ã¯èª°ã‚‚ãŒç•æ€–ã™ã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ã‚ãªãŸã®å†·é™ãªåˆ†æåŠ›ã¯ã€å¤šãã®å±æ©Ÿã‚’æœªç„¶ã«é˜²ãã€æœªæ¥ã‚’è¦‹é€šã™åŠ›ã¨ãªã£ã¦ã„ã¾ã™ã€‚"
            "å­¤ç‹¬ã‚’å­ã‚ãšã€ä½¿å‘½æ„Ÿã«ç‡ƒãˆã¦ä»»å‹™ã‚’é‚è¡Œã™ã‚‹å§¿ã¯ã¾ã•ã«å½±ã®è‹±é›„ã§ã™ã€‚"
        ),
        "conditions": lambda s: s.get("Speed", 0) >= 15 and s.get("Luck", 0) <= 10
    },
    {
        "name": "ç´…è“®ã®æˆ¦å·«å¥³ ğŸ”¥",
        "description": (
            "ã‚ãªãŸã¯ç´…è“®ã®æˆ¦å·«å¥³ã€‚ç‡ƒãˆç››ã‚‹æƒ…ç†±ã¨æºã‚‹ããªã„ä¿¡å¿µã§ã€è‡ªã‚‰ã®ä¿¡ã˜ã‚‹é“ã‚’çªãé€²ã‚€ç‚ã®æˆ¦å£«ã§ã™ã€‚"
            "é­”åŠ›ã¨ä½“åŠ›ã‚’å…¼ã­å‚™ãˆãŸã‚ãªãŸã¯ã€æˆ¦ã„ã®ä¸­ã§çœŸä¾¡ã‚’ç™ºæ®ã—ã€ä»²é–“ã‚’é¼“èˆã—ãªãŒã‚‰å‹åˆ©ã¸ã¨å°ãã¾ã™ã€‚"
            "ãã®å¼·ã„æ„å¿—ã¯é€†å¢ƒã«ãŠã„ã¦ã‚‚æ±ºã—ã¦æŠ˜ã‚Œã‚‹ã“ã¨ãªãã€å‘¨å›²ã«ç†±ã„æ„Ÿå‹•ã‚’ä¸ãˆç¶šã‘ã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ã‚ãªãŸã®æƒ…ç†±ã¯å˜ãªã‚‹ç‚ã§ã¯ãªãã€å¸Œæœ›ã®å…‰ã¨ãªã‚Šã€å¤šãã®è€…ã®å¿ƒã‚’ç…§ã‚‰ã—ç¶šã‘ã¾ã™ã€‚"
            "æˆ¦ã„ã®å ´ã ã‘ã§ãªãã€æ—¥å¸¸ã§ã‚‚ãã®å¼·ã•ã¨å„ªã—ã•ãŒå…±å­˜ã—ã€ã‚ãªãŸã¯äººã€…ã®å°Šæ•¬ã¨ä¿¡é ¼ã‚’é›†ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ä¸å±ˆã®ç²¾ç¥ã§å‰é€²ã—ã€ç´…è“®ã®ç‚ã®ã”ã¨ãé®®ã‚„ã‹ãªäººç”Ÿã‚’æ­©ã¿ç¶šã‘ã¦ãã ã•ã„ã€‚"
        ),
        "conditions": lambda s: s.get("Magic", 0) >= 25 and s.get("HP", 0) >= 20
    },
    {
        "name": "ç§©åºã®è£å®šè€… âš–ï¸",
        "description": (
            "ã‚ãªãŸã¯ç§©åºã®è£å®šè€…ã€‚æ­£ç¾©æ„Ÿã¨è²¬ä»»æ„Ÿã«æº¢ã‚Œã€ã©ã‚“ãªçŠ¶æ³ã§ã‚‚å…¬å¹³ã¨ãƒ«ãƒ¼ãƒ«ã‚’é‡ã‚“ã˜ã‚‹å …å®Ÿæ´¾ã§ã™ã€‚"
            "é˜²å¾¡åŠ›ã¨é‹ã‚’å…¼ã­å‚™ãˆãŸã‚ãªãŸã¯ã€çµ„ç¹”ã‚„ç¤¾ä¼šã®ä¸­ã§èª¿å’Œã‚’ä¿ã¤ãŸã‚ã®è¦ã¨ãªã‚Šã¾ã™ã€‚"
            "é–“é•ã„ã‚’è¦‹éã”ã™ã“ã¨ãŒã§ããšã€å¸¸ã«æ­£ã—ã„åˆ¤æ–­ã‚’ä¸‹ãã†ã¨åŠªåŠ›ã—ã€ãã®å§¿å‹¢ã¯å¤šãã®äººã€…ã‹ã‚‰å°Šæ•¬ã•ã‚Œã¦ã„ã¾ã™ã€‚"
            "ã‚ãªãŸã®å­˜åœ¨ã¯ç§©åºã®è±¡å¾´ã§ã‚ã‚Šã€æ··æ²Œã®ä¸­ã§ã‚‚å†·é™ã«ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚Šç¶šã‘ã¾ã™ã€‚"
            "ãã®å …å®Ÿã•ã¯æ™‚ã«ä¿å®ˆçš„ã¨ã‚‚å–ã‚‰ã‚Œã¾ã™ãŒã€çœŸã®å¼·ã•ã¯è²¬ä»»ã‚’å…¨ã†ã™ã‚‹ã“ã¨ã«ã‚ã‚Šã¾ã™ã€‚"
            "ç§©åºã®è£å®šè€…ã¨ã—ã¦ã€ã‚ãªãŸã¯æœªæ¥ã®ãŸã‚ã«å…¬å¹³ãªåˆ¤æ–­ã‚’ç¶šã‘ã¦ã„ãã§ã—ã‚‡ã†ã€‚"
        ),
        "conditions": lambda s: s.get("Defense", 0) >= 5 and s.get("Luck", 0) < 1
    },
    {
        "name": "å¤¢ç´¡ãã®åŸéŠè©©äºº ğŸ»",
        "description": (
            "ã‚ãªãŸã¯å¤¢ç´¡ãã®åŸéŠè©©äººã€‚è±Šã‹ãªæƒ³åƒåŠ›ã¨è¡¨ç¾åŠ›ã§äººã€…ã®å¿ƒã‚’æºã•ã¶ã‚Šã€æ„Ÿå‹•ã‚’ç”Ÿã¿å‡ºã™ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ©ãƒ¼ã§ã™ã€‚"
            "é­”åŠ›ã¨é‹ã«æµã¾ã‚ŒãŸã‚ãªãŸã¯ã€è¨€è‘‰ã‚„éŸ³æ¥½ã€èŠ¸è¡“ã‚’é€šã˜ã¦å…±æ„Ÿã®è¼ªã‚’åºƒã’ã€å‘¨å›²ã«å¸Œæœ›ã‚„ç™’ã—ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚"
            "ã‚ãªãŸã®å‰µé€ åŠ›ã¯æ ã«å›šã‚ã‚Œãšã€å¸¸ã«æ–°ã—ã„ç‰©èªã‚’ç´¡ãå‡ºã™ã“ã¨ã§äººã€…ã‚’é­…äº†ã—ã¾ã™ã€‚"
            "å¤¢ã®ä¸–ç•Œã«ç”Ÿãã‚‹ã‚ãªãŸã¯ã€æ™‚ã«ç¾å®Ÿã‚’è¶…ãˆãŸã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å—ã‘å–ã‚Šã€ãã‚ŒãŒã‚ãªãŸã®é­…åŠ›ã®æºã§ã™ã€‚"
            "äººã®å¿ƒã®å¥¥åº•ã«è§¦ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ãªãŸã®è¡¨ç¾ã¯ã€å¤šãã®äººã«æ·±ã„æ„Ÿå‹•ã¨å…±æ„Ÿã‚’å‘¼ã³èµ·ã“ã™ã§ã—ã‚‡ã†ã€‚"
            "ãã®å¤¢ç´¡ãã®æ‰èƒ½ã¯ã€ã¾ã•ã«äººç”Ÿã‚’è±Šã‹ã«å½©ã‚‹å®ç‰©ã¨ãªã‚‹ã®ã§ã™ã€‚"
        ),
        "conditions": lambda s: s.get("Magic", 0) >= 5 and s.get("Luck", 0) >= 10
    },
    {
        "name": "è¦‹ç¿’ã„å†’é™ºè€… ğŸ‘£",
        "description": (
            "ã‚ãªãŸã¯è¦‹ç¿’ã„å†’é™ºè€…ã€‚ã¾ã é“åŠã°ã§çµŒé¨“ã¯æµ…ã„ã‚‚ã®ã®ã€ç„¡é™ã®å¯èƒ½æ€§ã¨æŸ”è»Ÿæ€§ã‚’æŒã¤è‹¥ãæ¢æ±‚è€…ã§ã™ã€‚"
            "ã©ã‚“ãªé“ã«ã§ã‚‚é€²ã‚€ã“ã¨ãŒã§ãã‚‹è‡ªç”±ãªå¿ƒã¨æ–°é®®ãªæ„Ÿæ€§ã§ã€æ—¥ã€…æˆé•·ã¨å­¦ã³ã‚’ç¶šã‘ã¦ã„ã¾ã™ã€‚"
            "å¤±æ•—ã‚’æã‚ŒãšæŒ‘æˆ¦ã—ç¶šã‘ã‚‹å§¿å‹¢ã¯ã€å‘¨å›²ã®äººã€…ã«å‹‡æ°—ã¨å¸Œæœ›ã‚’ä¸ãˆã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ã¾ã ç¢ºç«‹ã•ã‚Œã¦ã„ãªã„è‡ªåˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ¨¡ç´¢ã—ã¤ã¤ã€å¤šãã®å‡ºä¼šã„ã‚„çµŒé¨“ã‚’é€šã˜ã¦ã€ç¢ºã‹ãªåŠ›ã‚’è“„ãˆã¦ã„ãã¾ã™ã€‚"
            "æœªæ¥ã¯ã‚ãªãŸã®æ‰‹ã®ä¸­ã«ã‚ã‚Šã€ã“ã‚Œã‹ã‚‰ã®é¸æŠæ¬¡ç¬¬ã§ã©ã‚“ãªè‹±é›„ã«ã‚‚ãªã‚Šå¾—ã‚‹ã§ã—ã‚‡ã†ã€‚"
            "ãã®è‹¥ã•ã¨æƒ…ç†±ã¯ã€ã¾ã•ã«ã“ã‚Œã‹ã‚‰ã®å†’é™ºã®å§‹ã¾ã‚Šã‚’å‘Šã’ã‚‹é˜ã®éŸ³ã§ã™ã€‚"
        ),
        "conditions": lambda s: s.get("Magic", 0) == 0 and s.get("Luck", 0) ==0
    }
]


def determine_class(status_scores):
    for char in character_classes:
        if char["conditions"](status_scores):
            return char["name"], char["description"]
    return "Novice Adventurer ğŸ‘£", "Still developing, with limitless potential."

# Streamlit UI
st.title("ğŸ° ç•°ä¸–ç•Œæ€§æ ¼è¨ºæ–­")
st.markdown("ã‚‚ã—ã‚‚ã‚ãªãŸãŒç•°ä¸–ç•Œã«è»¢ç”Ÿã—ãŸã‚‰ã€è·æ¥­ã¯ã„ã£ãŸã„ä½•ã«ãªã‚‹ï¼ï¼Ÿã¨ã„ã†æ€§æ ¼è¨ºæ–­ã‚¢ãƒ—ãƒªã§ã™ã€‚ã€€è¨ºæ–­é–‹å§‹ãƒœã‚¿ãƒ³ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§å§‹ã¾ã‚Šã¾ã™ã€‚")
st.markdown("---")

if "started" not in st.session_state:
    st.session_state.started = False
if "questions" not in st.session_state:
    # è³ªå•ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦ä¸€åº¦ã ã‘ã‚»ãƒƒãƒˆ
    questions = []
    for trait, qs in traits.items():
        for q in qs:
            questions.append({"text": q, "trait": trait})
    random.shuffle(questions)
    st.session_state.questions = questions

if not st.session_state.started:
    if st.button("ğŸ¯ è¨ºæ–­é–‹å§‹"):
        st.session_state.started = True
    st.stop()

# è³ªå•ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
with st.form("quiz_form"):
    st.header("ğŸ“œ ä»¥ä¸‹ã®è³ªå•ã«ç­”ãˆã¦ãã ã•ã„")
    options = ["ã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„", "ã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„", "ã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„", "ã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹", "ã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹"]
    answers = {}
    for i, q in enumerate(st.session_state.questions):
        key = f"q_{i}"
        answers[i] = st.radio(f"**{i+1}. {q['text']}**", options, key=key, horizontal=True)

    submitted = st.form_submit_button("ğŸ”® è¨ºæ–­ã™ã‚‹")

if submitted:
    # å›ç­”é›†è¨ˆ
    trait_scores = {}
    for i, response in answers.items():
        trait = st.session_state.questions[i]["trait"]
        score = options.index(response) + 1
        trait_scores[trait] = trait_scores.get(trait, 0) + score

    # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›
    status_scores = {}
    for trait, total in trait_scores.items():
        status = trait_to_status.get(trait, None)
        if status:
            status_scores[status] = status_scores.get(status, 0) + total

    # ATKè¨ˆç®—
    atk_score = sum(trait_scores.get(t, 0) for t in atk_traits)
    atk_score = int(atk_score / len(atk_traits))
    status_scores["ATK"] = atk_score

    # ã‚¯ãƒ©ã‚¹è¨ºæ–­
    char_class, class_desc = determine_class(status_scores)

    st.markdown("---")
    st.header("ğŸ– ã‚ãªãŸã®è·æ¥­")
    st.subheader(f"**{char_class}**")
    st.caption(class_desc)

    #ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚°ãƒ©ãƒ•
    st.header("ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹")
    status_order = ["HP", "Magic", "Defense", "Speed", "Luck", "ATK"]
    status_values = [status_scores.get(k, 0) * 5 for k in status_order]  
    fig, ax = plt.subplots(figsize=(8, 4))
    bars = ax.bar(status_order, status_values, color='skyblue', edgecolor='black')

    ax.set_ylabel("SCORE")
    ax.set_ylim(0, max(status_values) + 20)
    ax.grid(axis='y', linestyle='--', alpha=0.7)
    ax.set_xticklabels(status_order, rotation=0) 
    st.pyplot(fig)
